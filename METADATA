# go/google3metadata
# proto-file: devtools/metadata/metadata.proto
# proto-message: MetaData

name: "MetaLang"
description: "Lazy evaluation framework in python for use with Jax and Flax."

exported: {
  copybara: {
    config_path: "//depot/google3/third_party/py/metalang/copy.bara.sky"
  }
  path_expression: "//depot/google3/third_party/py/metalang/..."
  remote_location: "https://github.com/google-research/metalang"
  reason: OPEN_SOURCE
  description: "Metalang is an OSS project"
  owning_team_email: "sourdough-team@google.com"
}

third_party {
  url {
    type: PIPER
    value: "http://google3/third_party/py/metalang"
  }
}

presubmit: {
  path_expression: "//depot/google3/third_party/py/metalang/..."

  # Ensure that changes contain public notes for git commit messages.
  check_description: {
    required_regexp:
      "("
      "(^|\\n)\\s*BEGIN_PUBLIC\\s*?\\n"
      "(.*\\n)*"
      "\\s*\\S+.*(\\n.*)*\\n"
      "\\s*END_PUBLIC\\s*?\\n"
      "|"
      "(^|\\n)\\s*PUBLIC:(?: )*\\S+"
      ")"

    failure_message:
      "\n"
      "CL descriptions for changes must contain public notes.\n"
      "You can use either a single line or a block:\n"
      "\n"
      "PUBLIC: my public commit msg\n"
      "\n"
      "OR\n"
      "\n"
      "BEGIN_PUBLIC\n"
      "my public\n"
      "commit msg\n"
      "END_PUBLIC\n"
      "\n"
      "If you're certain your change does not produce public changes, the\n"
      "message can say 'Internal'.\n"
  }
}
presubmit: {
  check_tests: {
    project: "metalang"
  }
}
